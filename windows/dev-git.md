# Git Configuration

## Git for Windows system defaults

Git for Windows sets Windows-specific defaults at `C:\Program Files\Git\etc\gitconfig`:

```ini
# Line ending auto-conversion (we override this to false)
core.autocrlf = true

# Symlinks disabled (creates text files instead)
core.symlinks = false

# Windows SSL and credential storage
http.sslbackend = schannel
credential.helper = manager

# Performance optimization
core.fscache = true
```

**Key override:**
- **autocrlf=true**: System default converts LFâ†”CRLF automatically
  - **We override to false** (modern approach: use LF everywhere)

## User configuration

Created a minimal `.gitconfig` from scratch at `C:\Users\hiroshi\.gitconfig`.

Current `~/.gitconfig`:

```ini
[user]
  name = Hiroshi Ogawa
  email = hi.ogawa.zz@gmail.com

# New repos use 'main' instead of 'master'
[init]
  defaultBranch = main

# Colorized git output
[color]
  ui = auto

# Auto setup remote tracking on first push (no need for -u flag)
[push]
  autoSetupRemote = true

[alias]
  st = status
  ci = commit
  co = checkout
  br = branch
  lg = log --graph --oneline
  lga = log --graph --oneline --all

# Modern approach: use LF everywhere, no auto-conversion
# Overrides Git for Windows system default (autocrlf=true)
[core]
  autocrlf = false
  editor = nano
```

## Verification

```bash
# Check current config
git config --list --show-origin

# Verify autocrlf override (should show 'false' from user config, not 'true' from system)
git config --get core.autocrlf

# Test basic operations
git status
```

## Reference: Linux config repo

Config repo at https://github.com/hi-ogawa/config
- GPG/SSH commit signing configuration
- Global gitignore
- VS Code difftool/mergetool integration
- Additional aliases and settings

Can be used as reference for porting settings later.

## SSH and GitHub setup

Follow on Git Bash shell https://docs.github.com/en/authentication/connecting-to-github-with-ssh

### Windows-specific notes

**Key difference from Linux:**
- **ssh-agent doesn't persist** across Git Bash sessions (unlike Linux desktop sessions)
- Each new Git Bash window requires `eval "$(ssh-agent -s)"` and `ssh-add`
- Solution: Add ssh-agent auto-start to `~/.bashrc` (see below)

**Two SSH implementations on Windows:**
- **Git Bash SSH**: `/usr/bin/ssh` in Git Bash (bundled with Git for Windows)
- **Windows OpenSSH**: `C:\Windows\System32\OpenSSH\ssh.exe` in PowerShell/CMD (built-in to Windows 10/11)

Different binaries, but **fully interoperable**:
- Both generate identical key formats (Ed25519, RSA, etc.)
- Keys stored in same location: `~/.ssh/` = `C:\Users\hiroshi\.ssh\`
- Keys generated by either work with both
- Main difference: Windows OpenSSH's ssh-agent can run as Windows service (persistent across all sessions)

## Follow-up tasks

- [ ] Optional: Add global gitignore (`core.excludesfile`)
- [ ] Optional: Configure difftool/mergetool (VS Code integration)
- [ ] Optional: Review and port additional settings from Linux config repo
